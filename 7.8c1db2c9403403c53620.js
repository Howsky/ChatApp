(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BQh3:function(t,n,l){"use strict";n.compose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return function(n){if(0===t.length)return n;var l=t[t.length-1];return t.slice(0,-1).reduceRight(function(t,n){return n(t)},l(n))}}},DvwX:function(t,n,l){"use strict";l.r(n);var e=l("CcnG"),a=function(){return function(){}}(),c=l("pMnS"),i=l("6UMx"),o=l("0/Q6"),u=l("Mr+X"),r=l("SMsm"),s=l("Ip0R"),b=l("rTsB"),h=e.ob({encapsulation:0,styles:[[".contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.avatar[_ngcontent-%COMP%]{height:3.5rem;width:3.5rem;border-radius:50%;margin-right:2rem;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.name[_ngcontent-%COMP%]{font-size:1.8rem}"]],data:{}});function p(t){return e.Ib(0,[(t()(),e.qb(0,0,null,null,2,"mat-icon",[["class","material-icons mat-icon"],["color","accent"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,u.b,u.a)),e.pb(1,9158656,null,0,r.b,[e.k,r.d,[8,null],[2,r.a]],{color:[0,"color"]},null),(t()(),e.Gb(-1,0,["check"]))],function(t,n){t(n,1,0,"accent")},function(t,n){t(n,0,0,e.zb(n,1).inline)})}function f(t){return e.Ib(0,[(t()(),e.qb(0,0,null,null,5,"div",[["class","contact-item"]],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.toggle()&&e),e},null,null)),(t()(),e.qb(1,0,null,null,0,"img",[["class","avatar"]],[[8,"src",4]],null,null,null,null)),(t()(),e.qb(2,0,null,null,1,"span",[["class","name"]],null,null,null,null,null)),(t()(),e.Gb(3,null,["",""])),(t()(),e.hb(16777216,null,null,1,null,p)),e.pb(5,16384,null,0,s.l,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(t,n){t(n,5,0,n.component.selected)},function(t,n){var l=n.component;t(n,1,0,null==l.contact?null:l.contact.photoURL),t(n,3,0,null==l.contact?null:l.contact.displayName)})}var d=l("bujt"),g=l("UodH"),m=l("dWZg"),x=l("lLAP"),v=l("wFw1"),C=l("4f/t"),y=l("tuJJ"),w=l("zz1j"),k=l("JWMk"),_=l("ZYCi"),M=l("i6rr"),q=l("mrSG"),S=l("WhLG"),O=l("yGQT"),P=(l("BQh3"),l("HCqM")),T=function(t){return t.contacts},z=(Object(O.v)(T,P.a),l("/LwN")),I=function(t){function n(n,l){var e=t.call(this,n)||this;return e.appState$=n,e.router=l,e.contacts$=e.appState$.select(T),e.subscriptions=[],e.startBtnVisible=!1,e.registerEvents(),e}return Object(q.c)(n,t),n.prototype.onSelectedContact=function(t){this.appState$.dispatch(new z.d(t))},n.prototype.onDeselectedContact=function(t){this.appState$.dispatch(new z.c(t))},n.prototype.onDeselectedAllContact=function(){this.appState$.dispatch(new z.b(!0))},n.prototype.unregisterEvents=function(){this.subscriptions.forEach(function(t){return t.unsubscribe()})},n.prototype.registerEvents=function(){var t=this;this.subscriptions.push(this.contacts$.subscribe(function(n){t.selectedContacts=n.selectedContactsToTalk,t.startBtnVisible=t.selectedContacts.length>0}))},n}(S.a),V=l("jGGy"),j=(l("6233"),function(){function t(t){this.afDatabase=t}return t.prototype.getContacts=function(){return this.afDatabase.list("users")},t}()),G=l("67Y/"),D=l("FFOo"),$=l("T1DM"),A=(l("MGBS"),l("zotm"),{leading:!0,trailing:!1}),E=function(){function t(t,n,l,e){this.duration=t,this.scheduler=n,this.leading=l,this.trailing=e}return t.prototype.call=function(t,n){return n.subscribe(new F(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),F=function(t){function n(n,l,e,a,c){var i=t.call(this,n)||this;return i.duration=l,i.scheduler=e,i.leading=a,i.trailing=c,i._hasTrailingValue=!1,i._trailingValue=null,i}return q.c(n,t),n.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(B,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},n.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},n.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},n}(D.a);function B(t){t.subscriber.clearThrottle()}var L=function(){function t(t,n){this.contactsApiClient=t,this.authService=n}return t.prototype.getContacts=function(){var t,n,l=this;return this.contactsApiClient.getContacts().valueChanges().pipe(Object(G.a)(function(t){return t.filter(function(t){return t.uid!==l.authService.getUid()})})).pipe((void 0===t&&(t=$.a),void 0===n&&(n=A),function(l){return l.lift(new E(5e3,t,n.leading,n.trailing))}))},t}(),N=function(){function t(t,n,l,e){this.contactsService=t,this.contactsController=n,this.talkService=l,this.router=e,this.contacts=[]}return t.prototype.ngOnInit=function(){var t=this;this.contactsService.getContacts().subscribe(function(n){t.contacts=n}),this.contactsController.contacts$.subscribe(function(n){t.selectedContacts=n.selectedContactsToTalk})},t.prototype.ngOnDestroy=function(){this.contactsController.onDeselectedAllContact()},t.prototype.startTalking=function(){return t=this,void 0,l=function(){var t;return function(t,n){var l,e,a,c,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function o(c){return function(o){return function(c){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,e&&(a=2&c[0]?e.return:c[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,c[1])).done)return a;switch(e=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,e=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(t,i)}catch(o){c=[6,o],e=0}finally{l=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,o])}}}(this,function(n){switch(n.label){case 0:return[4,this.talkService.createNewTalkRoom(this.selectedContacts)];case 1:return t=n.sent(),this.router.navigate(["room/"+t]),[2]}})},new((n=void 0)||(n=Promise))(function(e,a){function c(t){try{o(l.next(t))}catch(n){a(n)}}function i(t){try{o(l.throw(t))}catch(n){a(n)}}function o(t){t.done?e(t.value):new n(function(n){n(t.value)}).then(c,i)}o((l=l.apply(t,[])).next())});var t,n,l},t}(),Y=e.ob({encapsulation:0,styles:[["mat-list-item[_ngcontent-%COMP%]{transition:all .2s}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}app-contact-item[_ngcontent-%COMP%]{width:100%}.start-btn[_ngcontent-%COMP%]{position:fixed;bottom:3rem;right:3rem}.contactItem[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.checkbox[_ngcontent-%COMP%]{margin-right:1.5rem}chatapp-contact-item[_ngcontent-%COMP%]{width:100%}.contacts[_ngcontent-%COMP%]{padding:2rem}"]],data:{}});function J(t){return e.Ib(0,[(t()(),e.qb(0,0,null,null,7,"div",[["class","contactItem"]],null,null,null,null,null)),(t()(),e.qb(1,0,null,null,6,"mat-list-item",[["class","mat-list-item"]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,i.c,i.b)),e.pb(2,1097728,null,3,o.c,[e.k,[2,o.g],[2,o.a]],null,null),e.Eb(603979776,1,{_lines:1}),e.Eb(335544320,2,{_avatar:0}),e.Eb(335544320,3,{_icon:0}),(t()(),e.qb(6,0,null,2,1,"chatapp-contact-item",[],null,[[null,"selectedContact"],[null,"deselectedContact"]],function(t,n,l){var e=!0,a=t.component;return"selectedContact"===n&&(e=!1!==a.contactsController.onSelectedContact(t.context.$implicit)&&e),"deselectedContact"===n&&(e=!1!==a.contactsController.onDeselectedContact(t.context.$implicit)&&e),e},f,h)),e.pb(7,114688,null,0,b.a,[],{contact:[0,"contact"]},{selectedContact:"selectedContact",deselectedContact:"deselectedContact"})],function(t,n){t(n,7,0,n.context.$implicit)},function(t,n){t(n,1,0,e.zb(n,2)._avatar||e.zb(n,2)._icon,e.zb(n,2)._avatar||e.zb(n,2)._icon)})}function W(t){return e.Ib(0,[(t()(),e.qb(0,0,null,null,4,"button",[["class","start-btn"],["color","accent"],["mat-fab",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.startTalking()&&e),e},d.b,d.a)),e.pb(1,180224,null,0,g.b,[e.k,m.a,x.b,[2,v.a]],{color:[0,"color"]},null),(t()(),e.qb(2,0,null,0,2,"mat-icon",[["class","mat-18 mat-icon"],["role","img"]],[[2,"mat-icon-inline",null]],null,null,u.b,u.a)),e.pb(3,9158656,null,0,r.b,[e.k,r.d,[8,null],[2,r.a]],null,null),(t()(),e.Gb(-1,0,["add"]))],function(t,n){t(n,1,0,"accent"),t(n,3,0)},function(t,n){t(n,0,0,e.zb(n,1).disabled||null,"NoopAnimations"===e.zb(n,1)._animationMode),t(n,2,0,e.zb(n,3).inline)})}function Q(t){return e.Ib(0,[(t()(),e.qb(0,0,null,null,14,"chatapp-mobile-layout",[],null,null,null,C.b,C.a)),e.pb(1,114688,null,0,y.a,[],null,null),(t()(),e.qb(2,0,null,0,1,"chatapp-navbar",[],null,null,null,w.b,w.a)),e.pb(3,114688,null,0,k.a,[_.k,_.a],{location:[0,"location"]},null),(t()(),e.qb(4,0,null,0,7,"section",[["class","mat-typography contacts"]],null,null,null,null,null)),(t()(),e.qb(5,0,null,null,6,"mat-list",[["class","mat-list mat-list-base"]],null,null,null,i.d,i.a)),e.pb(6,49152,null,0,o.a,[e.k],null,null),(t()(),e.qb(7,0,null,0,2,"h3",[["class","mat-subheader"],["mat-subheader",""]],null,null,null,null,null)),e.pb(8,16384,null,0,o.f,[],null,null),(t()(),e.Gb(-1,null,["Active"])),(t()(),e.hb(16777216,null,0,1,null,J)),e.pb(11,278528,null,0,s.k,[e.P,e.M,e.s],{ngForOf:[0,"ngForOf"]},null),(t()(),e.qb(12,0,null,0,2,"div",[["class","btnArea"]],null,null,null,null,null)),(t()(),e.hb(16777216,null,null,1,null,W)),e.pb(14,16384,null,0,s.l,[e.P,e.M],{ngIf:[0,"ngIf"]},null)],function(t,n){var l=n.component;t(n,1,0),t(n,3,0,"Contacts"),t(n,11,0,l.contacts),t(n,14,0,l.contactsController.startBtnVisible)},null)}function R(t){return e.Ib(0,[(t()(),e.qb(0,0,null,null,1,"chatapp-contacts",[],null,null,null,Q,Y)),e.pb(1,245760,null,0,N,[L,I,M.a,_.k],null,null)],function(t,n){t(n,1,0)},null)}var U=e.mb("chatapp-contacts",N,R,{},{},[]),X=l("t68o"),Z=l("gIcY"),H=l("M2Lx"),K=l("ZYjt"),tt=l("Wf4p"),nt=l("eDkP"),lt=l("Fzqc"),et=l("o3x0"),at=l("ug5D"),ct=function(){return function(){}}(),it=l("FVSy"),ot=l("8mMr"),ut=l("LC5p"),rt=l("qAlS"),st=l("Nsh5"),bt=l("de3e"),ht=l("kWGw"),pt=l("/VYK"),ft=l("seP3"),dt=l("b716"),gt=l("Blfk"),mt=l("4c35"),xt=l("kkrz"),vt=l("izPL"),Ct=l("9SEY"),yt=l("7rOj"),wt=l("1ua0"),kt=l("X+gm");l.d(n,"ContactsModuleNgFactory",function(){return _t});var _t=e.nb(a,[],function(t){return e.wb([e.xb(512,e.j,e.cb,[[8,[c.a,U,X.a]],[3,e.j],e.x]),e.xb(4608,s.n,s.m,[e.u,[2,s.w]]),e.xb(4608,Z.u,Z.u,[]),e.xb(4608,Z.e,Z.e,[]),e.xb(4608,H.c,H.c,[]),e.xb(4608,K.f,tt.c,[[2,tt.g],[2,tt.l]]),e.xb(4608,tt.b,tt.b,[]),e.xb(4608,nt.a,nt.a,[nt.g,nt.c,e.j,nt.f,nt.d,e.q,e.z,s.d,lt.b,[2,s.h]]),e.xb(5120,nt.h,nt.i,[nt.a]),e.xb(5120,et.b,et.c,[nt.a]),e.xb(135680,et.d,et.d,[nt.a,e.q,[2,s.h],[2,et.a],et.b,[3,et.d],nt.c]),e.xb(4608,j,j,[at.AngularFireDatabase]),e.xb(4608,L,L,[j,V.a]),e.xb(4608,I,I,[O.l,_.k]),e.xb(1073742336,s.c,s.c,[]),e.xb(1073742336,_.l,_.l,[[2,_.r],[2,_.k]]),e.xb(1073742336,ct,ct,[]),e.xb(1073742336,Z.s,Z.s,[]),e.xb(1073742336,Z.j,Z.j,[]),e.xb(1073742336,Z.q,Z.q,[]),e.xb(1073742336,lt.a,lt.a,[]),e.xb(1073742336,tt.l,tt.l,[[2,tt.d],[2,K.g]]),e.xb(1073742336,m.b,m.b,[]),e.xb(1073742336,tt.v,tt.v,[]),e.xb(1073742336,g.c,g.c,[]),e.xb(1073742336,it.f,it.f,[]),e.xb(1073742336,ot.b,ot.b,[]),e.xb(1073742336,ut.a,ut.a,[]),e.xb(1073742336,tt.n,tt.n,[]),e.xb(1073742336,tt.t,tt.t,[]),e.xb(1073742336,o.d,o.d,[]),e.xb(1073742336,rt.c,rt.c,[]),e.xb(1073742336,st.h,st.h,[]),e.xb(1073742336,r.c,r.c,[]),e.xb(1073742336,H.d,H.d,[]),e.xb(1073742336,bt.a,bt.a,[]),e.xb(1073742336,ht.c,ht.c,[]),e.xb(1073742336,pt.c,pt.c,[]),e.xb(1073742336,ft.e,ft.e,[]),e.xb(1073742336,dt.b,dt.b,[]),e.xb(1073742336,gt.c,gt.c,[]),e.xb(1073742336,mt.f,mt.f,[]),e.xb(1073742336,nt.e,nt.e,[]),e.xb(1073742336,et.g,et.g,[]),e.xb(1073742336,xt.a,xt.a,[]),e.xb(1073742336,vt.a,vt.a,[]),e.xb(1073742336,Ct.a,Ct.a,[]),e.xb(1073742336,yt.a,yt.a,[]),e.xb(1073742336,wt.a,wt.a,[]),e.xb(1073742336,kt.a,kt.a,[]),e.xb(1073742336,a,a,[]),e.xb(1024,_.i,function(){return[[{path:"",component:N}]]},[])])})}}]);